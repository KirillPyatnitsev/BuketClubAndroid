package com.opendev.buket.club.web;

import com.octo.android.robospice.request.SpiceRequest;
import com.octo.android.robospice.request.listener.RequestListener;

import org.codehaus.jackson.map.ObjectMapper;

import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.HashMap;
import java.util.Map;

import com.opendev.buket.club.web.request.BouquetsGetRequest;
import com.opendev.buket.club.web.request.OrderCreateRequest;
import com.opendev.buket.club.web.request.OrderGetRequest;
import com.opendev.buket.club.web.request.OrderPatchRequest;
import com.opendev.buket.club.web.request.OrdersGetRequest;
import com.opendev.buket.club.web.request.PriceRangeGetRequest;
import com.opendev.buket.club.web.request.ProfileGetRequest;
import com.opendev.buket.club.web.request.ShopsAllGetRequest;
import com.opendev.buket.club.web.response.BouquetsResponse;
import com.opendev.buket.club.web.response.DefaultResponse;
import com.opendev.buket.club.web.response.OrderResponse;
import com.opendev.buket.club.web.response.OrdersResponse;
import com.opendev.buket.club.web.response.PriceRangeResponse;
import com.opendev.buket.club.web.response.ProfileResponse;
import com.opendev.buket.club.web.response.ShopListResponse;

/**
 * Created by vernau on 7/8/16.
 */
public class FakeWebMethods extends WebMethods {

    private final ObjectMapper objectMapper = new ObjectMapper();

    private Map<Class<?>, FakeMapping> fakeMappings = new HashMap<Class<?>, FakeMapping>();

    public FakeWebMethods() {
        addFake(ProfileGetRequest.class, ProfileResponse.class, "{\"profile\":{\"id\":79,\"uuid\":\"b8491d462517d5bd\",\"type_price\":\"fix_price\",\"type_price_index\":0,\"phone\":\"+7 (919) 821-89-79\",\"full_name\":\"dmitry\",\"created_at\":\"2016-06-16T15:14:11.929+03:00\",\"updated_at\":\"2016-06-16T15:14:57.109+03:00\"}}}");
        addFake(OrderCreateRequest.class, OrderResponse.class, "{\"order\":{\"id\":1126,\"size\":\"middle\",\"size_index\":1,\"address\":null,\"address_lat\":0.0,\"address_lng\":0.0,\"recipient_name\":null,\"recipient_phone\":\"+7 (999) 999-99-99\",\"time_delivery\":null,\"comment\":\"\",\"price\":3780,\"status\":\"finding_shop\",\"status_index\":0,\"type_payment\":null,\"type_payment_index\":null,\"shipping_type\":\"pickup\",\"shipping_type_index\":0,\"created_at\":\"2016-07-06T10:30:09.117+03:00\",\"updated_at\":\"2016-07-06T10:30:09.117+03:00\",\"bouquet_item\":{\"id\":65,\"small_size_price\":2600,\"middle_size_price\":3780,\"large_size_price\":5700,\"small_size_flexible_price\":400,\"middle_size_flexible_price\":3780,\"large_size_flexible_price\":233,\"small_size_name\":\"Розы (3), Орхидеи (3), Альстромерия (2), Антирринум (2), Боувардия (2)\",\"middle_size_name\":\"Розы (5), Орхидеи (4), Альстромерия (3), Антирринум (2), Боувардия (2)\",\"large_size_name\":\"Розы (7), Орхидеи (6), Альстромерия (3), Антирринум (4), Боувардия (5)\",\"created_at\":\"2016-02-22T12:20:33.304+03:00\",\"updated_at\":\"2016-06-22T09:01:31.909+03:00\",\"image_url\":\"/uploads/bouquet_item/image/65/large_ac787e2b-057c-4f2c-a310-e84155ab863d.jpg\",\"name\":\"Букет из красных роз с орхидеями, альстромерией, боувардией и антирринумом\",\"description\":\"Букет из красных роз с орхидеями, альстромерией, боувардией и антирринумом\",\"flower_colors\":[{\"id\":37,\"value\":\"Красный\"}],\"day_events\":[{\"id\":33,\"value\":\"Подарок девушке\"},{\"id\":35,\"value\":\"Выпускной\"}],\"flower_type\":{\"id\":41,\"value\":\"Розы\"},\"flower_color\":{\"id\":37,\"value\":\"Красный\"},\"day_event\":null},\"shop\":{\"id\":50,\"name\":\"AndreyShop\",\"phone\":\"+8 800 555 35 35\",\"address_lat\":50.0378101422208,\"address_lng\":36.347398487851,\"image_url\":\"/uploads/shop/image/50/large_9b8af9a5-af67-49fc-82d4-ec5a2feb13b6.png\",\"cached_rating\":5.0},\"user\":{\"id\":79,\"type_price\":\"fix_price\",\"type_price_index\":0,\"phone\":\"+7 (919) 821-89-79\",\"full_name\":\"dmitry\"}}}");
        addFake(OrderPatchRequest.class, DefaultResponse.class, "{}");
        addFake(BouquetsGetRequest.class, BouquetsResponse.class, "{\"bouquet_items\":[{\"id\":68,\"small_size_price\":1700,\"middle_size_price\":2900,\"large_size_price\":3800,\"small_size_flexible_price\":null,\"middle_size_flexible_price\":null,\"large_size_flexible_price\":null,\"small_size_name\":\"*Пионы раз\",\"middle_size_name\":\"*Пионы два\",\"large_size_name\":\"*Пионы три\",\"created_at\":\"2016-04-26T10:51:14.237+03:00\",\"updated_at\":\"2016-06-22T09:01:03.396+03:00\",\"image_url\":\"/uploads/bouquet_item/image/68/large_9154d7cf-f858-4d4e-831a-1a36e1c92202.jpg\",\"name\":\"Пионы\",\"description\":\"Пионы XXL\",\"flower_colors\":[{\"id\":36,\"value\":\"Розовый\"}],\"day_events\":[{\"id\":33,\"value\":\"Подарок девушке\"}],\"flower_type\":{\"id\":56,\"value\":\"Пионы\"},\"flower_color\":{\"id\":36,\"value\":\"Розовый\"},\"day_event\":null},{\"id\":67,\"small_size_price\":1200,\"middle_size_price\":1900,\"large_size_price\":2400,\"small_size_flexible_price\":null,\"middle_size_flexible_price\":null,\"large_size_flexible_price\":null,\"small_size_name\":\"Букеток\",\"middle_size_name\":\"Букетик\",\"large_size_name\":\"Букетище\",\"created_at\":\"2016-04-26T10:49:15.584+03:00\",\"updated_at\":\"2016-06-22T09:01:14.333+03:00\",\"image_url\":\"/uploads/bouquet_item/image/67/large_4fe20ee0-bb54-4522-88cb-e9335084f25e.jpg\",\"name\":\"Хриза+орхидеи\",\"description\":\"Букетище\",\"flower_colors\":[{\"id\":51,\"value\":\"Яркий\"}],\"day_events\":[{\"id\":33,\"value\":\"Подарок девушке\"}],\"flower_type\":{\"id\":42,\"value\":\"Хризантемы\"},\"flower_color\":{\"id\":51,\"value\":\"Яркий\"},\"day_event\":null},{\"id\":66,\"small_size_price\":2300,\"middle_size_price\":3700,\"large_size_price\":4700,\"small_size_flexible_price\":100,\"middle_size_flexible_price\":null,\"large_size_flexible_price\":null,\"small_size_name\":\"Состав: Розы (3), герберы (3), альстромерии (3), астильба, салал, эвкалипт\",\"middle_size_name\":\"Состав: Розы (5), герберы (3), альстромерии (5), астильба, салал, эвкалипт\",\"large_size_name\":\"Состав: Розы (7), герберы (6), альстромерии (6), астильба, салал, эвкалипт\",\"created_at\":\"2016-03-23T23:54:16.508+03:00\",\"updated_at\":\"2016-06-22T09:01:23.024+03:00\",\"image_url\":\"/uploads/bouquet_item/image/66/large_1db18b85-df1c-441a-bdb9-7e555a25572f.jpg\",\"name\":\"Букет из красных роз с орхидеями, герберами и альстромерией\",\"description\":\"Букет из красных роз с орхидеями, герберами и альстромерией\",\"flower_colors\":[{\"id\":51,\"value\":\"Яркий\"}],\"day_events\":[{\"id\":32,\"value\":\"День рождения\"}],\"flower_type\":{\"id\":41,\"value\":\"Розы\"},\"flower_color\":{\"id\":51,\"value\":\"Яркий\"},\"day_event\":null},{\"id\":65,\"small_size_price\":2600,\"middle_size_price\":3780,\"large_size_price\":5700,\"small_size_flexible_price\":400,\"middle_size_flexible_price\":3780,\"large_size_flexible_price\":233,\"small_size_name\":\"Розы (3), Орхидеи (3), Альстромерия (2), Антирринум (2), Боувардия (2)\",\"middle_size_name\":\"Розы (5), Орхидеи (4), Альстромерия (3), Антирринум (2), Боувардия (2)\",\"large_size_name\":\"Розы (7), Орхидеи (6), Альстромерия (3), Антирринум (4), Боувардия (5)\",\"created_at\":\"2016-02-22T12:20:33.304+03:00\",\"updated_at\":\"2016-06-22T09:01:31.909+03:00\",\"image_url\":\"/uploads/bouquet_item/image/65/large_ac787e2b-057c-4f2c-a310-e84155ab863d.jpg\",\"name\":\"Букет из красных роз с орхидеями, альстромерией, боувардией и антирринумом\",\"description\":\"Букет из красных роз с орхидеями, альстромерией, боувардией и антирринумом\",\"flower_colors\":[{\"id\":37,\"value\":\"Красный\"}],\"day_events\":[{\"id\":33,\"value\":\"Подарок девушке\"},{\"id\":35,\"value\":\"Выпускной\"}],\"flower_type\":{\"id\":41,\"value\":\"Розы\"},\"flower_color\":{\"id\":37,\"value\":\"Красный\"},\"day_event\":null},{\"id\":64,\"small_size_price\":1000,\"middle_size_price\":1800,\"large_size_price\":3000,\"small_size_flexible_price\":null,\"middle_size_flexible_price\":100500,\"large_size_flexible_price\":1,\"small_size_name\":\"Букет из красных роз, 30см, 9шт\",\"middle_size_name\":\"Букет из красных роз, 30см, 19шт\",\"large_size_name\":\"Букет из красных роз, 30см, 39шт\",\"created_at\":\"2016-02-16T22:33:13.882+03:00\",\"updated_at\":\"2016-06-22T09:01:51.286+03:00\",\"image_url\":\"/uploads/bouquet_item/image/64/large_df5d3322-f487-4cc8-a839-b7b57040afa1.jpg\",\"name\":\"Букет из красных роз, 30см\",\"description\":\"Букет из красных роз, 30см\",\"flower_colors\":[{\"id\":37,\"value\":\"Красный\"}],\"day_events\":[],\"flower_type\":{\"id\":41,\"value\":\"Розы\"},\"flower_color\":{\"id\":37,\"value\":\"Красный\"},\"day_event\":null},{\"id\":63,\"small_size_price\":500,\"middle_size_price\":800,\"large_size_price\":1200,\"small_size_flexible_price\":400,\"middle_size_flexible_price\":null,\"large_size_flexible_price\":null,\"small_size_name\":\"маленький\",\"middle_size_name\":\"средний\",\"large_size_name\":\"большой\",\"created_at\":\"2016-02-13T00:45:08.440+03:00\",\"updated_at\":\"2016-06-22T09:01:59.575+03:00\",\"image_url\":\"/uploads/bouquet_item/image/63/large_169eec87-2ab8-4575-80cd-f06c97023311.jpg\",\"name\":\"Букетище\",\"description\":\"Прекрасный букет из хризантем, роз и зелени :)\",\"flower_colors\":[{\"id\":38,\"value\":\"Желтый\"}],\"day_events\":[{\"id\":32,\"value\":\"День рождения\"},{\"id\":33,\"value\":\"Подарок девушке\"},{\"id\":34,\"value\":\"Подарок маме\"}],\"flower_type\":{\"id\":42,\"value\":\"Хризантемы\"},\"flower_color\":{\"id\":38,\"value\":\"Желтый\"},\"day_event\":null},{\"id\":62,\"small_size_price\":1,\"middle_size_price\":2,\"large_size_price\":3,\"small_size_flexible_price\":10,\"middle_size_flexible_price\":null,\"large_size_flexible_price\":750,\"small_size_name\":\"Маленький\",\"middle_size_name\":\"Средненький\",\"large_size_name\":\"Большой\",\"created_at\":\"2016-02-12T20:18:59.171+03:00\",\"updated_at\":\"2016-06-22T09:02:10.690+03:00\",\"image_url\":\"/uploads/bouquet_item/image/62/large_e8372e75-8576-48f3-8639-276de107e4fe.jpg\",\"name\":\"Тестовый\",\"description\":\"...\",\"flower_colors\":[{\"id\":37,\"value\":\"Красный\"}],\"day_events\":[],\"flower_type\":{\"id\":41,\"value\":\"Розы\"},\"flower_color\":{\"id\":37,\"value\":\"Красный\"},\"day_event\":null},{\"id\":61,\"small_size_price\":530,\"middle_size_price\":740,\"large_size_price\":910,\"small_size_flexible_price\":505,\"middle_size_flexible_price\":500,\"large_size_flexible_price\":940,\"small_size_name\":\"маленький\",\"middle_size_name\":\"средний\",\"large_size_name\":\"большой\",\"created_at\":\"2016-02-10T14:53:13.907+03:00\",\"updated_at\":\"2016-06-22T09:02:20.950+03:00\",\"image_url\":\"/uploads/bouquet_item/image/61/large_ca85bfef-d7a9-40ed-9194-920891138b97.jpg\",\"name\":\"Букет\",\"description\":\"Большой букет\",\"flower_colors\":[{\"id\":37,\"value\":\"Красный\"}],\"day_events\":[],\"flower_type\":{\"id\":41,\"value\":\"Розы\"},\"flower_color\":{\"id\":37,\"value\":\"Красный\"},\"day_event\":null},{\"id\":60,\"small_size_price\":100,\"middle_size_price\":300,\"large_size_price\":500,\"small_size_flexible_price\":null,\"middle_size_flexible_price\":null,\"large_size_flexible_price\":null,\"small_size_name\":\"малый\",\"middle_size_name\":\"средний\",\"large_size_name\":\"большой\",\"created_at\":\"2016-02-10T10:43:29.317+03:00\",\"updated_at\":\"2016-06-22T09:02:30.528+03:00\",\"image_url\":\"/uploads/bouquet_item/image/60/large_7dbe0ec8-e9e1-4c98-962b-944d889798e6.jpg\",\"name\":\"Ирисы и тюльпаны\",\"description\":\"новый тип букетов\",\"flower_colors\":[{\"id\":36,\"value\":\"Розовый\"}],\"day_events\":[{\"id\":31,\"value\":\"Свадьба\"}],\"flower_type\":{\"id\":57,\"value\":\"Ирисы\"},\"flower_color\":{\"id\":36,\"value\":\"Розовый\"},\"day_event\":null},{\"id\":59,\"small_size_price\":290,\"middle_size_price\":320,\"large_size_price\":430,\"small_size_flexible_price\":395,\"middle_size_flexible_price\":null,\"large_size_flexible_price\":365,\"small_size_name\":\"маленькая роза\",\"middle_size_name\":\"средняя роза\",\"large_size_name\":\"большая роза\",\"created_at\":\"2016-02-10T09:49:35.566+03:00\",\"updated_at\":\"2016-06-22T09:02:40.920+03:00\",\"image_url\":\"/uploads/bouquet_item/image/59/large_76f323cf-e7bd-4818-94b7-da37401c5f65.jpg\",\"name\":\"Розы\",\"description\":\"описание...\",\"flower_colors\":[{\"id\":37,\"value\":\"Красный\"}],\"day_events\":[],\"flower_type\":{\"id\":41,\"value\":\"Розы\"},\"flower_color\":{\"id\":37,\"value\":\"Красный\"},\"day_event\":null},{\"id\":58,\"small_size_price\":5,\"middle_size_price\":10,\"large_size_price\":15,\"small_size_flexible_price\":null,\"middle_size_flexible_price\":5,\"large_size_flexible_price\":5,\"small_size_name\":\"маленький\",\"middle_size_name\":\"средний\",\"large_size_name\":\"большой\",\"created_at\":\"2016-01-22T14:15:20.397+03:00\",\"updated_at\":\"2016-06-22T09:02:50.316+03:00\",\"image_url\":\"/uploads/bouquet_item/image/58/large_9d4f3a59-50c8-4f86-b6b4-d5202db65cd9.jpg\",\"name\":\"Букет Rose\",\"description\":\"большой яркий букет\",\"flower_colors\":[{\"id\":37,\"value\":\"Красный\"}],\"day_events\":[{\"id\":31,\"value\":\"Свадьба\"}],\"flower_type\":{\"id\":41,\"value\":\"Розы\"},\"flower_color\":{\"id\":37,\"value\":\"Красный\"},\"day_event\":{\"id\":31,\"value\":\"Свадьба\"}},{\"id\":56,\"small_size_price\":2500,\"middle_size_price\":3200,\"large_size_price\":4800,\"small_size_flexible_price\":null,\"middle_size_flexible_price\":null,\"large_size_flexible_price\":null,\"small_size_name\":\"Маленький\",\"middle_size_name\":\"Средний\",\"large_size_name\":\"Большой\",\"created_at\":\"2015-12-14T13:37:06.918+03:00\",\"updated_at\":\"2016-06-22T09:03:00.771+03:00\",\"image_url\":\"/uploads/bouquet_item/image/56/large_90b691d2-c434-424e-b343-f62e0aee5f17.jpg\",\"name\":\"Букет из роз\",\"description\":\"Букет из роз\",\"flower_colors\":[{\"id\":37,\"value\":\"Красный\"}],\"day_events\":[{\"id\":31,\"value\":\"Свадьба\"}],\"flower_type\":{\"id\":41,\"value\":\"Розы\"},\"flower_color\":{\"id\":37,\"value\":\"Красный\"},\"day_event\":{\"id\":31,\"value\":\"Свадьба\"}}],\"meta\":{\"pagination\":{\"current_page\":1,\"next_page\":null,\"prev_page\":null,\"total_pages\":1,\"total_count\":12}}}");
        addFake(PriceRangeGetRequest.class, PriceRangeResponse.class, "{\"price_range\":{\"min_price\":1,\"max_price\":5700}}");
        addFake(OrdersGetRequest.class, OrdersResponse.class, "{\"orders\":[{\"id\":1126,\"size\":\"middle\",\"size_index\":1,\"address\":null,\"address_lat\":0.0,\"address_lng\":0.0,\"recipient_name\":null,\"recipient_phone\":\"+7 (999) 999-99-99\",\"time_delivery\":null,\"comment\":\"\",\"price\":3780,\"status\":\"finding_shop\",\"status_index\":0,\"type_payment\":null,\"type_payment_index\":null,\"shipping_type\":\"pickup\",\"shipping_type_index\":0,\"created_at\":\"2016-07-06T10:30:09.117+03:00\",\"updated_at\":\"2016-07-06T10:30:09.117+03:00\",\"bouquet_item\":{\"id\":65,\"small_size_price\":2600,\"middle_size_price\":3780,\"large_size_price\":5700,\"small_size_flexible_price\":400,\"middle_size_flexible_price\":3780,\"large_size_flexible_price\":233,\"small_size_name\":\"Розы (3), Орхидеи (3), Альстромерия (2), Антирринум (2), Боувардия (2)\",\"middle_size_name\":\"Розы (5), Орхидеи (4), Альстромерия (3), Антирринум (2), Боувардия (2)\",\"large_size_name\":\"Розы (7), Орхидеи (6), Альстромерия (3), Антирринум (4), Боувардия (5)\",\"created_at\":\"2016-02-22T12:20:33.304+03:00\",\"updated_at\":\"2016-06-22T09:01:31.909+03:00\",\"image_url\":\"/uploads/bouquet_item/image/65/large_ac787e2b-057c-4f2c-a310-e84155ab863d.jpg\",\"name\":\"Букет из красных роз с орхидеями, альстромерией, боувардией и антирринумом\",\"description\":\"Букет из красных роз с орхидеями, альстромерией, боувардией и антирринумом\",\"flower_colors\":[{\"id\":37,\"value\":\"Красный\"}],\"day_events\":[{\"id\":33,\"value\":\"Подарок девушке\"},{\"id\":35,\"value\":\"Выпускной\"}],\"flower_type\":{\"id\":41,\"value\":\"Розы\"},\"flower_color\":{\"id\":37,\"value\":\"Красный\"},\"day_event\":null},\"shop\":{\"id\":50,\"name\":\"AndreyShop\",\"phone\":\"+8 800 555 35 35\",\"address_lat\":50.0378101422208,\"address_lng\":36.347398487851,\"image_url\":\"/uploads/shop/image/50/large_9b8af9a5-af67-49fc-82d4-ec5a2feb13b6.png\",\"cached_rating\":5.0},\"user\":{\"id\":79,\"type_price\":\"fix_price\",\"type_price_index\":0,\"phone\":\"+7 (919) 821-89-79\",\"full_name\":\"dmitry\"}},{\"id\":1131,\"size\":\"middle\",\"size_index\":1,\"address\":null,\"address_lat\":0.0,\"address_lng\":0.0,\"recipient_name\":null,\"recipient_phone\":\"+7 (999) 999-99-99\",\"time_delivery\":null,\"comment\":\"\",\"price\":1900,\"status\":\"finding_shop\",\"status_index\":0,\"type_payment\":null,\"type_payment_index\":null,\"shipping_type\":\"pickup\",\"shipping_type_index\":0,\"created_at\":\"2016-07-07T16:46:53.068+03:00\",\"updated_at\":\"2016-07-07T16:46:53.068+03:00\",\"bouquet_item\":{\"id\":67,\"small_size_price\":1200,\"middle_size_price\":1900,\"large_size_price\":2400,\"small_size_flexible_price\":null,\"middle_size_flexible_price\":null,\"large_size_flexible_price\":null,\"small_size_name\":\"Букеток\",\"middle_size_name\":\"Букетик\",\"large_size_name\":\"Букетище\",\"created_at\":\"2016-04-26T10:49:15.584+03:00\",\"updated_at\":\"2016-06-22T09:01:14.333+03:00\",\"image_url\":\"/uploads/bouquet_item/image/67/large_4fe20ee0-bb54-4522-88cb-e9335084f25e.jpg\",\"name\":\"Хриза+орхидеи\",\"description\":\"Букетище\",\"flower_colors\":[{\"id\":51,\"value\":\"Яркий\"}],\"day_events\":[{\"id\":33,\"value\":\"Подарок девушке\"}],\"flower_type\":{\"id\":42,\"value\":\"Хризантемы\"},\"flower_color\":{\"id\":51,\"value\":\"Яркий\"},\"day_event\":null},\"shop\":null,\"user\":{\"id\":79,\"type_price\":\"fix_price\",\"type_price_index\":0,\"phone\":\"+7 (919) 821-89-79\",\"full_name\":\"dmitry\"}},{\"id\":1130,\"size\":\"middle\",\"size_index\":1,\"address\":\"улица М.Горького, Саратов, Саратовская область, Россия\",\"address_lat\":0.0,\"address_lng\":0.0,\"recipient_name\":null,\"recipient_phone\":\"+7 (999) 999-99-99\",\"time_delivery\":null,\"comment\":\"коммент тест\",\"price\":3780,\"status\":\"finding_shop\",\"status_index\":0,\"type_payment\":null,\"type_payment_index\":null,\"shipping_type\":\"address\",\"shipping_type_index\":1,\"created_at\":\"2016-07-07T10:45:15.683+03:00\",\"updated_at\":\"2016-07-07T10:45:15.683+03:00\",\"bouquet_item\":{\"id\":65,\"small_size_price\":2600,\"middle_size_price\":3780,\"large_size_price\":5700,\"small_size_flexible_price\":400,\"middle_size_flexible_price\":3780,\"large_size_flexible_price\":233,\"small_size_name\":\"Розы (3), Орхидеи (3), Альстромерия (2), Антирринум (2), Боувардия (2)\",\"middle_size_name\":\"Розы (5), Орхидеи (4), Альстромерия (3), Антирринум (2), Боувардия (2)\",\"large_size_name\":\"Розы (7), Орхидеи (6), Альстромерия (3), Антирринум (4), Боувардия (5)\",\"created_at\":\"2016-02-22T12:20:33.304+03:00\",\"updated_at\":\"2016-06-22T09:01:31.909+03:00\",\"image_url\":\"/uploads/bouquet_item/image/65/large_ac787e2b-057c-4f2c-a310-e84155ab863d.jpg\",\"name\":\"Букет из красных роз с орхидеями, альстромерией, боувардией и антирринумом\",\"description\":\"Букет из красных роз с орхидеями, альстромерией, боувардией и антирринумом\",\"flower_colors\":[{\"id\":37,\"value\":\"Красный\"}],\"day_events\":[{\"id\":33,\"value\":\"Подарок девушке\"},{\"id\":35,\"value\":\"Выпускной\"}],\"flower_type\":{\"id\":41,\"value\":\"Розы\"},\"flower_color\":{\"id\":37,\"value\":\"Красный\"},\"day_event\":null},\"shop\":null,\"user\":{\"id\":79,\"type_price\":\"fix_price\",\"type_price_index\":0,\"phone\":\"+7 (919) 821-89-79\",\"full_name\":\"dmitry\"}}],\"meta\":{\"pagination\":{\"current_page\":1,\"next_page\":null,\"prev_page\":null,\"total_pages\":1,\"total_count\":9}}}");
        addFake(ShopsAllGetRequest.class, ShopListResponse.class, "{\"shops\":[{\"id\":50,\"name\":\"AndreyShop\",\"phone\":\"+8 800 555 35 35\",\"address_lat\":50.0378101422208,\"address_lng\":36.347398487851,\"image_url\":\"/uploads/shop/image/50/large_9b8af9a5-af67-49fc-82d4-ec5a2feb13b6.png\",\"cached_rating\":5.0},{\"id\":51,\"name\":\"dfgdfg\",\"phone\":\"dsfsdf\",\"address_lat\":49.7669516726594,\"address_lng\":27.7881930691406,\"image_url\":\"/uploads/shop/image/51/large_eba1176a-2a50-466d-b341-93a8ce20ab94.png\",\"cached_rating\":null},{\"id\":31,\"name\":\"mifkamaz\",\"phone\":null,\"address_lat\":null,\"address_lng\":null,\"image_url\":null,\"cached_rating\":null},{\"id\":53,\"name\":\"RV\",\"phone\":\"8999 999 99 99\",\"address_lat\":51.5333026388753,\"address_lng\":46.0363199003041,\"image_url\":\"/uploads/shop/image/53/large_a3b60e50-8e76-4b7f-a863-ed9b080bd5fc.jpg\",\"cached_rating\":3.45454545454545},{\"id\":61,\"name\":\"RVII\",\"phone\":\"89878268140\",\"address_lat\":51.5471743613631,\"address_lng\":46.0683443635254,\"image_url\":\"/uploads/shop/image/61/large_c3dcb764-670c-4915-8c01-b1a78ee9d2fd.png\",\"cached_rating\":4.33333333333333},{\"id\":66,\"name\":\"sdfdsf@dsd.ccsc\",\"phone\":null,\"address_lat\":null,\"address_lng\":null,\"image_url\":null,\"cached_rating\":null},{\"id\":65,\"name\":\"test@example.cuuuom\",\"phone\":null,\"address_lat\":null,\"address_lng\":null,\"image_url\":null,\"cached_rating\":null},{\"id\":42,\"name\":\"ЗАО Вера\",\"phone\":\"392-919-3245\",\"address_lat\":19.9831156387395,\"address_lng\":-136.47069008431,\"image_url\":\"/uploads/shop/image/42/large_9ef102fc-cc51-4dca-a649-85a05e3d4951.png\",\"cached_rating\":null},{\"id\":24,\"name\":\"ЗАО Кириллов\",\"phone\":\"581.248.2882\",\"address_lat\":11.1857394058986,\"address_lng\":115.791186169487,\"image_url\":\"/uploads/shop/image/24/large_eeb5694e-98df-48c7-a2ca-3052700c3e16.png\",\"cached_rating\":null},{\"id\":28,\"name\":\"ЗАО ТоргТорг\",\"phone\":\"421-043-2061\",\"address_lat\":-46.2191571998537,\"address_lng\":160.386780240275,\"image_url\":\"/uploads/shop/image/28/large_0e2f4547-ce51-4cdd-a8e7-09227172d387.png\",\"cached_rating\":null},{\"id\":25,\"name\":\"ИП Потапов\",\"phone\":\"129-244-7743\",\"address_lat\":12.210066516512,\"address_lng\":-66.6527345288219,\"image_url\":\"/uploads/shop/image/25/large_75766234-cc66-4b9f-977a-2bff02570217.png\",\"cached_rating\":null},{\"id\":21,\"name\":\"ИП СбытПромСбыт\",\"phone\":\"544-421-6792\",\"address_lat\":-63.9520784091653,\"address_lng\":17.5155895483426,\"image_url\":\"/uploads/shop/image/21/large_ab5bde29-4fb4-4a15-9e72-6f25c5dcc074.png\",\"cached_rating\":null},{\"id\":27,\"name\":\"ИП СнабСбытСбыт\",\"phone\":\"1-519-800-5564\",\"address_lat\":2.4071251491355,\"address_lng\":-177.584275598574,\"image_url\":\"/uploads/shop/image/27/large_372781c6-250d-421e-bec7-85e8fc1e15a4.png\",\"cached_rating\":null},{\"id\":15,\"name\":\"ИП СнабТрейд\",\"phone\":\"801-775-6408\",\"address_lat\":-75.1520071625796,\"address_lng\":-114.399745693694,\"image_url\":\"/uploads/shop/image/15/large_7a4fab2d-63c1-4041-8c67-c684497613ca.png\",\"cached_rating\":null},{\"id\":62,\"name\":\"Камилькины цветы\",\"phone\":\"+79063594268\",\"address_lat\":55.7554899,\"address_lng\":37.5820125,\"image_url\":\"/uploads/shop/image/62/large_a6c595c8-853e-452e-9a1f-8059df269f98.png\",\"cached_rating\":3.5},{\"id\":43,\"name\":\"Магаз\",\"phone\":\"9999999999\",\"address_lat\":50.0289027790918,\"address_lng\":36.3284185901284,\"image_url\":\"/uploads/shop/image/43/large_e35c4977-2dec-45fc-8b37-3f4f2748eeb0.jpg\",\"cached_rating\":4.0},{\"id\":46,\"name\":\"Магаз 2\",\"phone\":\"1213212313213\",\"address_lat\":49.9794877610865,\"address_lng\":36.2590456008911,\"image_url\":\"/uploads/shop/image/46/large_355425db-c026-43fa-b45f-74944b2d2b30.jpg\",\"cached_rating\":null},{\"id\":60,\"name\":\"МАГАЗИН\",\"phone\":\"1\",\"address_lat\":51.5314174,\"address_lng\":46.0634001999999,\"image_url\":\"/uploads/shop/image/60/large_2ddd8506-cef1-4df3-8d3e-de781df770a8.jpg\",\"cached_rating\":3.0},{\"id\":64,\"name\":\"Магазин1\",\"phone\":null,\"address_lat\":null,\"address_lng\":null,\"image_url\":null,\"cached_rating\":null},{\"id\":55,\"name\":\"Название\",\"phone\":null,\"address_lat\":null,\"address_lng\":null,\"image_url\":null,\"cached_rating\":null},{\"id\":54,\"name\":\" Название\",\"phone\":\"89173285799\",\"address_lat\":51.5309037569165,\"address_lng\":46.0626803899353,\"image_url\":\"/uploads/shop/image/54/large_0641fa96-10a2-4ff5-962a-380bd8c8847c.png\",\"cached_rating\":2.64285714285714},{\"id\":29,\"name\":\"НКО Никита\",\"phone\":\"(776) 129-3175\",\"address_lat\":41.7159021595088,\"address_lng\":-164.390266547253,\"image_url\":\"/uploads/shop/image/29/large_8485809b-ba55-418b-8235-072839ab1768.png\",\"cached_rating\":null},{\"id\":11,\"name\":\"НКО РязаньТоргТоргПром\",\"phone\":\"923-245-0694\",\"address_lat\":61.9969773855035,\"address_lng\":101.245449387134,\"image_url\":\"/uploads/shop/image/11/large_3af2bc52-2f23-462f-ab16-d642a421c373.png\",\"cached_rating\":null},{\"id\":19,\"name\":\"НКО СаратовТрейдСбытТрейд\",\"phone\":\"1-956-244-7588\",\"address_lat\":34.0273549350803,\"address_lng\":67.109244675151,\"image_url\":\"/uploads/shop/image/19/large_4bb94687-cc52-4755-8aa7-9000f062c105.png\",\"cached_rating\":null},{\"id\":18,\"name\":\"НКО Селиверстов\",\"phone\":\"1-515-686-8709\",\"address_lat\":39.9040023319289,\"address_lng\":42.5376256491158,\"image_url\":\"/uploads/shop/image/18/large_29f852e8-37ad-4269-81e7-a2a3e16f680e.png\",\"cached_rating\":null}],\"meta\":{\"pagination\":{\"current_page\":1,\"next_page\":2,\"prev_page\":null,\"total_pages\":3,\"total_count\":56}}}");
    }

    public static String loadResource(String name) {
        String str;
        InputStream in = FakeWebMethods.class.getResourceAsStream(name);
        if (in != null) {
            try {
                InputStreamReader ir = new InputStreamReader(in, "UTF-8");
                StringBuilder sb = new StringBuilder();
                char[] buf = new char[1000];
                int charsRead;
                while ((charsRead = ir.read(buf)) >= 0) {
                    sb.append(buf, 0, charsRead);
                }
                str = sb.toString();
            } catch (Exception e) {
                throw new RuntimeException("Failed to load: " + e.getMessage(), e);
            }
            return str;
        }
        return null;
    }

    private void addFake(Class<?> requestClass,
                         Class<?> responseClass, String responseJson) {
        fakeMappings.put(requestClass, new FakeMapping(responseClass, responseJson));
    }

    @Override
    protected <T> void execute(SpiceRequest<T> request, RequestListener<T> requestListener) {
        T result = makeFakeResult(request);
        if (result == null) {
            super.execute(request, requestListener);
        } else {
            requestListener.onRequestSuccess(result);
        }
    }

    private <T> T makeFakeResult(SpiceRequest<T> request) {
        T result;
        FakeMapping fm = fakeMappings.get(request.getClass());
        if (fm == null) {
            result = null;
        } else {
            try {
                result = (T) makeObjectFromJson(fm.responseClass, fm.responseJson);
            } catch (IOException e) {
                throw new RuntimeException("Got exception", e);
            }
        }
        return result;
    }

    private <T> T makeObjectFromJson(Class<T> clazz, String json) throws IOException {
        T t = objectMapper.readValue(json, clazz);
        return t;
    }

    public void setDelay(int delayMs) {
    }

    private static class FakeMapping {
        Class<?> responseClass;
        String responseJson;

        public FakeMapping(Class<?> reponseClass, String responseJson) {
            this.responseClass = reponseClass;
            this.responseJson = responseJson;
        }
    }
}